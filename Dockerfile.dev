FROM nodered/node-red:latest

# Arbeitsverzeichnis setzen
USER root

# Entwicklungstools installieren
RUN apk add --no-cache git

# Arbeitsverzeichnis für das Modul erstellen
WORKDIR /data

# Node-RED Benutzer die Rechte geben
RUN chown -R node-red:root /data && \
    chmod -R 755 /data

# Zurück zu node-red Benutzer wechseln
USER node-red

# Zurück zum Datenverzeichnis
WORKDIR /data

# Das Modul wird als Volume gemountet, daher keine Installation hier nötig
# Node-RED wird das Modul automatisch erkennen, wenn es im nodes-Verzeichnis liegt

